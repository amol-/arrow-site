---
layout: post
title: "Apache Arrow 7.0.0 Release"
date: "2022-02-09 00:00:00 -0600"
author: pmc
categories: [release]
---
<!--
{% comment %}
Licensed to the Apache Software Foundation (ASF) under one or more
contributor license agreements.  See the NOTICE file distributed with
this work for additional information regarding copyright ownership.
The ASF licenses this file to you under the Apache License, Version 2.0
(the "License"); you may not use this file except in compliance with
the License.  You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
{% endcomment %}
-->


The Apache Arrow team is pleased to announce the 7.0.0 release. This covers
over 3 months of development work and includes [**474 resolved issues**][1]
from [**?? distinct contributors**][2]. See the Install Page to learn how to
get the libraries for your platform.

The release notes below are not exhaustive and only expose selected highlights
of the release. Many other bugfixes and improvements have been made: we refer
you to the [complete changelog][3].

## Community

Since the 6.0.1 release, Rémi Dattai and Alessandro Molina have been invited to be committers.
Daniël Heres and Yibo Cai have joined the Project Management Committee (PMC).
Thanks for your contributions and participation in the project!

## Columnar Format Notes

TBD

## Arrow Flight RPC notes

The Flight specification has been clarified to note that schemas are expected to be IPC-encapsulated on the wire.

Documentation has been generally improved; see the [Arrow Cookbook](https://arrow.apache.org/cookbook/) for recipes on how to use Flight in Python and R, and a new [example](https://github.com/apache/arrow/blob/master/cpp/examples/arrow/flight_grpc_example.cc) on how to use Flight and gRPC services on the same port.

This release includes Arrow Flight SQL, a protocol for using Arrow Flight to execute queries against and fetch metadata from SQL databases. Support is included for C++ and Java (but *not* languages that bind to C++, like Python or R). A more detailed blog post is forthcoming. Note that development is ongoing and the specification is currently experimental.

## C++ notes

A set of CMake presets has been added to ease building Arrow in a number
of cases (ARROW-14678, ARROW-14714).

The `arrow::BitUtil` namespace has been renamed to `arrow::bit_util`
(ARROW-13494).

Concatenation of union arrays is now supported (ARROW-4975).

`StructType` gained three convenience methods to add, change and remove
a given field (ARROW-11424).

The `Datum` kind `COLLECTION` has been removed as it was entirely unused
in the codebase (ARROW-13598).

### Compute Layer

A number of compute functions have been added:

- functions operating on strings: "binary_reverse" (ARROW-14306),
  "string_repeat" (ARROW-12712), "utf8_normalize" (ARROW-14205);
- "fill_null_forward", "fill_null_backward" (ARROW-1699);
- "ceil_temporal", "floor_temporal", "round_temporal" to adjust temporal input
  to an integral multiple of a given unit (ARROW-14822);
- "year_month_day" to extract the calendar components of the input (ARROW-15032);
- "random" to general random floating-point values between 0 and 1 (ARROW-12404);
- "indices_nonzero" to return the indices in the input where there are
  non-zero, non-null values (ARROW-13035).

Decimal data is now supported as input of the arithmetic kernels
(ARROW-13130).

Dictionary data is now supported as input of the hash join execution node
(ARROW-14181).

Residual predicates have been implemented in the hash join node
(ARROW-13643).

The "list_parent_indices" function now always returns int64 data
regardless of the input type (ARROW-14592).

Month-day-nano interval data is now supported as input of the same functions
as other interval types (ARROW-13989).

### CSV

The CSV writer got additional configuration options:
- the string representation of null values (ARROW-14905);
- the quoting strategy: always / never / as needed (ARROW-14905);
- the end of line character(s) (ARROW-14907)

### Dataset Layer

"SkyHook", a dataset addition that offloads fragment scan operations to a
Ceph distributed storage, was contributed (ARROW-13607).

The dataset writer now exposes options `min_rows_per_group` and
`max_rows_per_group` to control the size of row groups created (ARROW-14426).

### IO and Filesystem Layer

A critical bug in the AWS SDK for C++ that risks losing data in S3 multipart
uploads has been circumvented (ARROW-14523).

The Google Cloud Storage filesystem is now featureful enough to pass all
generic filesystem tests (ARROW-14924).

The OpenAppendStream method of filesystems has been un-deprecated; however,
it still cannot be implemented for all filesystem backends (ARROW-14969).

A new function `arrow::fs::ResolveS3BucketRegion` allows resolving the
region where a particular S3 bucket resides (ARROW-15165).

The S3 filesystem now sets the Content-Type of output files to
"application/octet-stream" (instead of "application/xml" previously)
if not explicitly specified by the caller (ARROW-15306).

### IPC

Fine-grained I/O (coalescing) is now enabled in the synchronous (ARROW-12683)
and asynchronous (ARROW-14577) IPC reader.

It is now possible to set the compression level when using LZ4 compression
(ARROW-9648).

### Parquet

DELTA_BYTE_ARRAY-encoded data can now be read from (but not written to)
bytearray columns in Parquet files (PARQUET-492).

## C# notes

TBD

## Go notes

### Bug Fixes

TBD

### Enhancements

TBD

## Java notes

TBD

## JavaScript notes

TBD

## Python notes

TBD

## R notes

TBD

## Ruby and C GLib notes

### Ruby

There are two new contributors @okadakk and @simpl1g .

The updates of Red Arrow consists of the following improvements:

- `Arrow::Function#execute` now accepts an instance of an `Arrow::Column` as its argument [(ARROW-14551)](https://issues.apache.org/jira/browse/ARROW-14551)
- `Arrow::Table.load` now supports `.arrows` files to load [(ARROW-15356)](https://issues.apache.org/jira/browse/ARROW-15356)
- Add support loading `Arrow::Table` by a `URI` in `Arrow::Table.load` [(ARROW-14562)](https://issues.apache.org/jira/browse/ARROW-14562)
- `Arrow::Table` now supports to join two tables [(ARROW-14531)](https://issues.apache.org/jira/browse/ARROW-14531)
- `Arrow::Function#execute` gets more easier to use than before [(ARROW-15274)](https://issues.apache.org/jira/browse/ARROW-15274)
- `Arrow::SortKey#name` has been renamed to `Arrow::SortKey#target` [(ARROW-14784)](https://issues.apache.org/jira/browse/ARROW-14784)
- Add Cookbook section to documentation [(ARROW-14636)](https://issues.apache.org/jira/browse/ARROW-14636)
- Support the explicit initialization of S3 API by the `Arrow.s3_initialize` method [(ARROW-14637)](https://issues.apache.org/jira/browse/ARROW-14637)
- On macOS, stop specifying the version of openssl package explicitly when building the extension library [(ARROW-14619)](https://issues.apache.org/jira/browse/ARROW-14619)

### C GLib

The updates of Arrow GLib etc. consists of the following improvements:

- Add `garrow_execute_plan_build_hash_join_node` function, `GArrowHashJoinNodeOption`, and `GArrowJoinType` [(ARROW-15288)](https://issues.apache.org/jira/browse/ARROW-15288)
- Add `garrow_function_get_options_type` function [(ARROW-15273)](https://issues.apache.org/jira/browse/ARROW-15273)
- Add `garrow_function_get_default_options` function [(ARROW-15267)](https://issues.apache.org/jira/browse/ARROW-15267)
- Add `GArrowRoundToMultipleOptions` to customize the `round_to_multiple` function [(ARROW-15216)](https://issues.apache.org/jira/browse/ARROW-15216)
- Add `garrow_function_all` function to list up all the functions [(ARROW-15205)](https://issues.apache.org/jira/browse/ARROW-15205)
    - In addition, add `garrow_function_get_name`, `garrow_function_equal`, and `garrow_function_to_string` functions for convenience
- Add `GArrowRoundOptions` [(ARROW-15204)](https://issues.apache.org/jira/browse/ARROW-15204)
- Add `garrow_struct_scalar_get_value` function for converting a C++ scalar value to a GLib value [(ARROW-15203)](https://issues.apache.org/jira/browse/ARROW-15203)
- Add the following three interval data types [(ARROW-15134)](https://issues.apache.org/jira/browse/ARROW-15134)
    - `GArrowMonthIntervalDataType` for the interval with the month component
    - `GArrowDayTimeIntervalDataType` for the interval with the days and the milliseconds components
    - `GArrowMonthDayNanoIntervalDataType` for the interval with the months, the days, and the nanoseconds components
- Rename `GArrowSortKey::name` to `::target` [(ARROW-14784)](https://issues.apache.org/jira/browse/ARROW-14784)
- Support the explicit initialization of S3 API by the `garrow_s3_initialize` function [(ARROW-14637)](https://issues.apache.org/jira/browse/ARROW-14637)
- `garrow_decimal128_new_string` and `garrow_decimal256_new_string` now returns errors when they gets a invalid decimal string [(ARROW-14530)](https://issues.apache.org/jira/browse/ARROW-14530)
- `garrow_decimal128_data_type_new` and `garrow_decimal256_data_type_new` functions now validates the given precision [(ARROW-14529)](https://issues.apache.org/jira/browse/ARROW-14529)


## Rust notes

Rust releases minor versions every 2 weeks in addition to a major
version with the rest of the Arrow language implementations. Thus most
enhancements have been incrementally released over the last 3 months
as part of the 6.x.

Going forward, the Rust implementation version will start deviating
from the rest of the Arrow implementations, incrementing a major
version if the changes to the crate require it. We still plan a
release every other week. Please see issue [#1120](https://github.com/apache/arrow-rs/issues/1120)
for more details

Major changes in the 7.0.0 release include:
1. Additional support for `Decimal`
2. More ergonomic compute kernels that take `dyn Array`
3. `Union` type now follows the latest Arrow standard
4. Support for custom datetime format for inference and parsing CSV files

Another highlight is that the community continues to improve the
safety of the arrow crate. The 6.4.0 release included complete data
validation and has resolved all outstanding RUSTSEC issues against the
crate.

For additional details on the 7.0.0
Rust implementation, please see the [Arrow Rust CHANGELOG][5]

[1]: https://issues.apache.org/jira/issues/?jql=project%20%3D%20ARROW%20AND%20status%20%3D%20Resolved%20AND%20fixVersion%20%3D%207.0.0
[2]: {{ site.baseurl }}/release/7.0.0.html#contributors
[3]: {{ site.baseurl }}/release/7.0.0.html
[4]: {{ site.baseurl }}/docs/r/news/
[5]: https://github.com/apache/arrow-rs/blob/7.0.0/CHANGELOG.md
